<!DOCTYPE html>
<html lang="en" dir="ltr" typeof="bibo:Document " prefix="bibo: http://purl.org/ontology/bibo/ w3p: http://www.w3.org/2001/02pd/rec54#">
<head><meta property="dc:language" content="en" lang="">
<title>FIDO 2.0: Web API for accessing FIDO 2.0 credentials</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    

    
    
<style>/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

/* --- INLINES --- */
em.rfc2119 { 
    text-transform:     lowercase;
    font-variant:       small-caps;
    font-style:         normal;
    color:              #900;
}

h1 acronym, h2 acronym, h3 acronym, h4 acronym, h5 acronym, h6 acronym, a acronym,
h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr {
    border: none;
}

dfn {
    font-weight:    bold;
}

a.internalDFN {
    color:  inherit;
    border-bottom:  1px solid #99c;
    text-decoration:    none;
}

a.externalDFN {
    color:  inherit;
    border-bottom:  1px dotted #ccc;
    text-decoration:    none;
}

a.bibref {
    text-decoration:    none;
}

cite .bibref {
    font-style: normal;
}

code {
    color:  #C83500;
}

/* --- TOC --- */
.toc a, .tof a {
    text-decoration:    none;
}

a .secno, a .figno {
    color:  #000;
}

ul.tof, ol.tof {
    list-style: none outside none;
}

.caption {
    margin-top: 0.5em;
    font-style:   italic;
}

/* --- TABLE --- */
table.simple {
    border-spacing: 0;
    border-collapse:    collapse;
    border-bottom:  3px solid #005a9c;
}

.simple th {
    background: #005a9c;
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
}

.simple th[scope="row"] {
    background: inherit;
    color:  inherit;
    border-top: 1px solid #ddd;
}

.simple td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
    background: #f0f6ff;
}

/* --- DL --- */
.section dd > p:first-child {
    margin-top: 0;
}

.section dd > p:last-child {
    margin-bottom: 0;
}

.section dd {
    margin-bottom:  1em;
}

.section dl.attrs dd, .section dl.eldef dd {
    margin-bottom:  0;
}

@media print {
    .removeOnSave {
        display: none;
    }
}
</style><style>/* --- EXAMPLES --- */
div.example-title {
    min-width: 7.5em;
    color: #b9ab2d;
}
div.example-title span {
    text-transform: uppercase;
}
aside.example, div.example, div.illegal-example {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
div.illegal-example { color: red }
div.illegal-example p { color: black }
aside.example, div.example {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    border-color: #e0cb52;
    background: #fcfaee;
}

aside.example div.example {
    border-left-width: .1em;
    border-color: #999;
    background: #fff;
}
aside.example div.example div.example-title {
    color: #999;
}
</style><style>/* HIGHLIGHTS */
code.prettyprint {
    color:  inherit;
}

/* this from google-code-prettify */
.pln{color:#000}@media screen{.str{color:#080}.kwd{color:#008}.com{color:#800}.typ{color:#606}.lit{color:#066}.pun,.opn,.clo{color:#660}.tag{color:#008}.atn{color:#606}.atv{color:#080}.dec,.var{color:#606}.fun{color:red}}@media print,projection{.str{color:#060}.kwd{color:#006;font-weight:bold}.com{color:#600;font-style:italic}.typ{color:#404;font-weight:bold}.lit{color:#044}.pun,.opn,.clo{color:#440}.tag{color:#006;font-weight:bold}.atn{color:#404}.atv{color:#060}}ol.linenums{margin-top:0;margin-bottom:0}li.L0,li.L1,li.L2,li.L3,li.L5,li.L6,li.L7,li.L8{list-style-type:none}li.L1,li.L3,li.L5,li.L7,li.L9{background:#eee}
</style><style>/* --- WEB IDL --- */
pre.idl {
    border-top: 1px solid #90b8de;
    border-bottom: 1px solid #90b8de;
    padding:    1em;
    line-height:    120%;
}

pre.idl::before {
    content:    "WebIDL";
    display:    block;
    width:      150px;
    background: #90b8de;
    color:  #fff;
    font-family:    sans-serif;
    padding:    3px;
    font-weight:    bold;
    margin: -1em 0 1em -1em;
}

.idlType {
    color:  #ff4500;
    font-weight:    bold;
    text-decoration:    none;
}

/*.idlModule*/
/*.idlModuleID*/
/*.idlInterface*/
.idlInterfaceID, .idlDictionaryID, .idlCallbackID, .idlEnumID {
    font-weight:    bold;
    color:  #005a9c;
}
a.idlEnumItem {
    color:  #000;
    border-bottom:  1px dotted #ccc;
    text-decoration: none;
}

.idlSuperclass {
    font-style: italic;
    color:  #005a9c;
}

/*.idlAttribute*/
.idlAttrType, .idlFieldType, .idlMemberType {
    color:  #005a9c;
}
.idlAttrName, .idlFieldName, .idlMemberName {
    color:  #ff4500;
}
.idlAttrName a, .idlFieldName a, .idlMemberName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlMethod*/
.idlMethType, .idlCallbackType {
    color:  #005a9c;
}
.idlMethName {
    color:  #ff4500;
}
.idlMethName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlCtor*/
.idlCtorName {
    color:  #ff4500;
}
.idlCtorName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlParam*/
.idlParamType {
    color:  #005a9c;
}
.idlParamName, .idlDefaultValue {
    font-style: italic;
}

.extAttr {
    color:  #666;
}

/*.idlSectionComment*/
.idlSectionComment {
    color: gray;
}

/*.idlIterable*/
.idlIterableKeyType, .idlIterableValueType {
    color:  #005a9c;
}

/*.idlMaplike*/
.idlMaplikeKeyType, .idlMaplikeValueType {
    color:  #005a9c;
}

/*.idlConst*/
.idlConstType {
    color:  #005a9c;
}
.idlConstName {
    color:  #ff4500;
}
.idlConstName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlException*/
.idlExceptionID {
    font-weight:    bold;
    color:  #c00;
}

.idlTypedefID, .idlTypedefType {
    color:  #005a9c;
}

.idlRaises, .idlRaises a.idlType, .idlRaises a.idlType code, .excName a, .excName a code {
    color:  #c00;
    font-weight:    normal;
}

.excName a {
    font-family:    monospace;
}

.idlRaises a.idlType, .excName a.idlType {
    border-bottom:  1px dotted #c00;
}

.excGetSetTrue, .excGetSetFalse, .prmNullTrue, .prmNullFalse, .prmOptTrue, .prmOptFalse {
    width:  45px;
    text-align: center;
}
.excGetSetTrue, .prmNullTrue, .prmOptTrue { color:  #0c0; }
.excGetSetFalse, .prmNullFalse, .prmOptFalse { color:  #c00; }

.idlImplements a {
    font-weight:    bold;
}

dl.attributes, dl.methods, dl.constants, dl.constructors, dl.fields, dl.dictionary-members {
    margin-left:    2em;
}

.attributes dt, .methods dt, .constants dt, .constructors dt, .fields dt, .dictionary-members dt {
    font-weight:    normal;
}

.attributes dt code, .methods dt code, .constants dt code, .constructors dt code, .fields dt code, .dictionary-members dt code {
    font-weight:    bold;
    color:  #000;
    font-family:    monospace;
}

.attributes dt code, .fields dt code, .dictionary-members dt code {
    background:  #ffffd2;
}

.attributes dt .idlAttrType code, .fields dt .idlFieldType code, .dictionary-members dt .idlMemberType code {
    color:  #005a9c;
    background:  transparent;
    font-family:    inherit;
    font-weight:    normal;
    font-style: italic;
}

.methods dt code {
    background:  #d9e6f8;
}

.constants dt code {
    background:  #ddffd2;
}

.constructors dt code {
    background:  #cfc;
}

.attributes dd, .methods dd, .constants dd, .constructors dd, .fields dd, .dictionary-members dd {
    margin-bottom:  1em;
}

table.parameters, table.exceptions {
    border-spacing: 0;
    border-collapse:    collapse;
    margin: 0.5em 0;
    width:  100%;
}
table.parameters { border-bottom:  1px solid #90b8de; }
table.exceptions { border-bottom:  1px solid #deb890; }

.parameters th, .exceptions th {
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
    font-weight:    normal;
    text-shadow:    #666 1px 1px 0;
}
.parameters th { background: #90b8de; }
.exceptions th { background: #deb890; }

.parameters td, .exceptions td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
    vertical-align: top;
}

.parameters tr:first-child td, .exceptions tr:first-child td {
    border-top: none;
}

.parameters td.prmName, .exceptions td.excName, .exceptions td.excCodeName {
    width:  100px;
}

.parameters td.prmType {
    width:  120px;
}

table.exceptions table {
    border-spacing: 0;
    border-collapse:    collapse;
    width:  100%;
}
</style><link href="https://www.w3.org/StyleSheets/TR/W3C-Member-SUBM" rel="stylesheet"><!--[if lt IE 9]><script src='https://www.w3.org/2008/site/js/html5shiv.js'></script><![endif]--><script type="application/json" id="initialUserConfig">{
  "specStatus": "Member-SUBM",
  "specVersion": "v2.0",
  "shortName": "fido-web-api",
  "publishDate": "2015-11-20",
  "copyrightStart": "2013",
  "editors": [
    {
      "name": "Vijay Bharadwaj",
      "mailto": "vijay.bharadwaj@microsoft.com",
      "company": "Microsoft",
      "companyURL": "https://www.microsoft.com"
    }
  ],
  "authors": [
    {
      "name": "Hubert Le Van Gong",
      "mailto": "hlevangong@paypal.com",
      "company": "PayPal",
      "companyURL": "https://www.paypal.com"
    },
    {
      "name": "Dirk Balfanz",
      "mailto": "balfanz@google.com",
      "company": "Google",
      "companyURL": "https://www.google.com"
    },
    {
      "name": "Alexei Czeskis",
      "mailto": "aczeskis@google.com",
      "company": "Google",
      "companyURL": "https://www.google.com"
    },
    {
      "name": "Arnar Birgisson",
      "mailto": "arnarb@google.com",
      "company": "Google",
      "companyURL": "https://www.google.com"
    },
    {
      "name": "Jeff Hodges",
      "mailto": "Jeff.Hodges@paypal.com",
      "company": "PayPal",
      "companyURL": "https://www.paypal.com"
    }
  ],
  "wg": "FIDO Alliance",
  "wgURI": "https://fidoalliance.org/",
  "localBiblio": {
    "FIDOSignatureFormat": {
      "title": "FIDO 2.0: Signature format",
      "href": "http://www.w3.org/Submission/2015/SUBM-fido-signature-format-20151120/"
    },
    "FIDOKeyAttestation": {
      "title": "FIDO 2.0: Key attestation format",
      "href": "http://www.w3.org/Submission/2015/SUBM-fido-key-attestation-20151120/"
    }
  }
}</script></head>
<body id="respecDocument" role="document" class="h-entry"><div id="respecHeader" role="contentinfo" class="head">
  <p>
      
        
            <a href="http://www.w3.org/"><img src="https://www.w3.org/Icons/w3c_home" alt="W3C" width="72" height="48"></a>
            
            <a href="http://www.w3.org/Submission/"> <img alt="W3C Member Submission" src="http://www.w3.org/Icons/member_subm" width="211" height="48"></a>
            
            
        
      
  </p>
  <h1 class="title p-name" id="title" property="dcterms:title">FIDO 2.0: Web API for accessing FIDO 2.0 credentials</h1>
  
  <h2 id="w3c-member-submission-20-november-2015"><abbr title="World Wide Web Consortium">W3C</abbr> Member Submission <time property="dcterms:issued" class="dt-published" datetime="2015-11-20">20 November 2015</time></h2>
  <dl>
    
      <dt>This version:</dt>
      <dd><a class="u-url" href="http://www.w3.org/Submission/2015/SUBM-fido-web-api-20151120/">http://www.w3.org/Submission/2015/SUBM-fido-web-api-20151120/</a></dd>
      <dt>Latest published version:</dt>
      <dd><a href="http://www.w3.org/Submission/fido-web-api/">http://www.w3.org/Submission/fido-web-api/</a></dd>
    
    
    
    
    
    
    
    
    <dt>Editor:</dt>
    <dd class="p-author h-card vcard" property="bibo:editor" resource="_:editor0"><span property="rdf:first" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Vijay Bharadwaj</span>, <a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="https://www.microsoft.com">Microsoft</a>, <span class="ed_mailto"><a class="u-email email" property="foaf:mbox" href="mailto:vijay.bharadwaj@microsoft.com">vijay.bharadwaj@microsoft.com</a></span></span>
<span property="rdf:rest" resource="rdf:nil"></span>
</dd>

    
      <dt>Authors:</dt>
      <dd class="p-author h-card vcard"><span property="dc:contributor" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Hubert Le Van Gong</span>, <a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="https://www.paypal.com">PayPal</a>, <span class="ed_mailto"><a class="u-email email" property="foaf:mbox" href="mailto:hlevangong@paypal.com">hlevangong@paypal.com</a></span></span>
</dd>
<dd class="p-author h-card vcard"><span property="dc:contributor" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Dirk Balfanz</span>, <a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="https://www.google.com">Google</a>, <span class="ed_mailto"><a class="u-email email" property="foaf:mbox" href="mailto:balfanz@google.com">balfanz@google.com</a></span></span>
</dd>
<dd class="p-author h-card vcard"><span property="dc:contributor" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Alexei Czeskis</span>, <a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="https://www.google.com">Google</a>, <span class="ed_mailto"><a class="u-email email" property="foaf:mbox" href="mailto:aczeskis@google.com">aczeskis@google.com</a></span></span>
</dd>
<dd class="p-author h-card vcard"><span property="dc:contributor" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Arnar Birgisson</span>, <a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="https://www.google.com">Google</a>, <span class="ed_mailto"><a class="u-email email" property="foaf:mbox" href="mailto:arnarb@google.com">arnarb@google.com</a></span></span>
</dd>
<dd class="p-author h-card vcard"><span property="dc:contributor" typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Jeff Hodges</span>, <a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="https://www.paypal.com">PayPal</a>, <span class="ed_mailto"><a class="u-email email" property="foaf:mbox" href="mailto:Jeff.Hodges@paypal.com">Jeff.Hodges@paypal.com</a></span></span>
</dd>

    
    
  </dl>
  
  
  
  
    
      <p class="copyright">
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> ©
        2013-2015
        
        <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup>
        (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
        <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
        <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). 
        
        <abbr title="World Wide Web Consortium">W3C</abbr> <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
        
          
            <a rel="license" href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a>
          
        
        rules apply.
      </p>
    
  
  <hr>
</div>

<!-- only put content here if you want a custom status of document not
the specification-maturity-appropriate boilerplate -->



<section property="dc:abstract" class="introductory" id="abstract"><h2 resource="#h-abstract" id="h-abstract"><span property="xhv:role" resource="xhv:heading">Abstract</span></h2>
  <p>This specification defines an API that enables web pages to access FIDO 2.0 compliant strong cryptographic credentials through browser script. Conceptually, credentials are stored on a FIDO 2.0 authenticator, and each credential is bound to a single Relying Party. Authenticators are responsible for ensuring that no operation is performed without the user's consent. The user agent mediates access to credentials in order to preserve user privacy.</p>
</section><section id="sotd" class="introductory"><h2 resource="#h-sotd" id="h-sotd"><span property="xhv:role" resource="xhv:heading">Status of This Document</span></h2>
  
    
      
        <p>
          <em>This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications can be found in the <a href="http://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at http://www.w3.org/TR/.</em>
        </p>
        
          
          
            <p>By publishing this document, <abbr title="World Wide Web Consortium">W3C</abbr> acknowledges that the <a href="http://www.w3.org/Submission/2015/SUBM-fido-web-api-20151120/">Submitting Members</a> have made a formal Submission request to <abbr title="World Wide Web Consortium">W3C</abbr> for discussion. Publication of this document by <abbr title="World Wide Web Consortium">W3C</abbr> indicates no endorsement of its content by <abbr title="World Wide Web Consortium">W3C</abbr>, nor that <abbr title="World Wide Web Consortium">W3C</abbr> has, is, or will be allocating any resources to the issues addressed by it. This document is not the product of a chartered <abbr title="World Wide Web Consortium">W3C</abbr> group, but is published as potential input to the <a href="http://www.w3.org/Consortium/Process"><abbr title="World Wide Web Consortium">W3C</abbr> Process</a>. A <a href="http://www.w3.org/Submission/2015/02/Comment/"><abbr title="World Wide Web Consortium">W3C</abbr> Team Comment</a> has been published in conjunction with this Member Submission. Publication of acknowledged Member Submissions at the <abbr title="World Wide Web Consortium">W3C</abbr> site is one of the benefits of <a href="http://www.w3.org/Consortium/Prospectus/Joining"><abbr title="World Wide Web Consortium">W3C</abbr> Membership</a>. Please consult the requirements associated with Member Submissions of <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-submissions">section 3.3 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>. Please consult the complete <a href="http://www.w3.org/Submission">list of acknowledged <abbr title="World Wide Web Consortium">W3C</abbr> Member Submissions</a>.</p>
          
        
      
    
  
</section><section id="toc"><h2 resource="#h-toc" id="h-toc" class="introductory"><span property="xhv:role" resource="xhv:heading">Table of Contents</span></h2><ul id="respecContents" role="directory" class="toc"><li class="tocline"><a class="tocxref" href="#use-cases"><span class="secno">1. </span>Use Cases</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#registration-embedded-authenticator-mode"><span class="secno">1.1 </span>Registration (embedded authenticator mode)</a></li><li class="tocline"><a class="tocxref" href="#authentication-external-authenticator-mode"><span class="secno">1.2 </span>Authentication (external authenticator mode)</a></li><li class="tocline"><a class="tocxref" href="#other-configurations"><span class="secno">1.3 </span>Other configurations</a></li></ul></li><li class="tocline"><a class="tocxref" href="#conformance"><span class="secno">2. </span>Conformance</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#dependencies"><span class="secno">2.1 </span>Dependencies</a></li></ul></li><li class="tocline"><a class="tocxref" href="#fido-authenticator-model"><span class="secno">3. </span>FIDO Authenticator model</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#the-authenticatormakecredential-operation"><span class="secno">3.1 </span>The <span data-dfn-type="dfn">authenticatorMakeCredential</span> operation</a></li><li class="tocline"><a class="tocxref" href="#the-authenticatorgetassertion-operation"><span class="secno">3.2 </span>The <span data-dfn-type="dfn">authenticatorGetAssertion</span> operation</a></li><li class="tocline"><a class="tocxref" href="#the-authenticatorcancel-operation"><span class="secno">3.3 </span>The <span data-dfn-type="dfn">authenticatorCancel</span> operation</a></li></ul></li><li class="tocline"><a class="tocxref" href="#api"><span class="secno">4. </span>FIDO Credential API</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#fidocredentials-interface"><span class="secno">4.1 </span><span data-idl="" data-dfn-type="dfn" data-dfn-for=""><code>FIDOCredentials</code></span> Interface</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#create-a-new-credential-makecredential-method"><span class="secno">4.1.1 </span>Create a new credential (<span data-idl="" data-dfn-type="dfn" data-dfn-for="fidocredentials"><code>makeCredential</code></span> method)</a></li><li class="tocline"><a class="tocxref" href="#use-an-existing-credential-getassertion-method"><span class="secno">4.1.2 </span>Use an existing credential (<span data-idl="" data-dfn-type="dfn" data-dfn-for="fidocredentials"><code>getAssertion</code></span> method)</a></li></ul></li><li class="tocline"><a class="tocxref" href="#fidocredentialinfo-interface"><span class="secno">4.2 </span><span data-idl="" data-dfn-type="dfn" data-dfn-for=""><code>FIDOCredentialInfo</code></span> Interface</a></li><li class="tocline"><a class="tocxref" href="#user-account-information-dictionary-account"><span class="secno">4.3 </span>User Account Information (dictionary <span data-idl="" data-dfn-type="dfn" data-dfn-for=""><code>Account</code></span>)</a></li><li class="tocline"><a class="tocxref" href="#parameters-for-credential-generation-dictionary-fidocredentialparameters"><span class="secno">4.4 </span>Parameters for Credential Generation (dictionary <span data-idl="" data-dfn-type="dfn" data-dfn-for=""><code>FIDOCredentialParameters</code></span>)</a></li><li class="tocline"><a class="tocxref" href="#supporting-data-structures"><span class="secno">4.5 </span>Supporting Data Structures</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#credential-type-enumeration-enum-credentialtype"><span class="secno">4.5.1 </span>Credential Type enumeration (enum <span data-idl="" data-dfn-type="dfn" data-dfn-for=""><code>CredentialType</code></span>)</a></li><li class="tocline"><a class="tocxref" href="#unique-identifier-for-credential-interface-credential"><span class="secno">4.5.2 </span>Unique Identifier for Credential (interface <span data-idl="" data-dfn-type="dfn" data-dfn-for=""><code>Credential</code></span>)</a></li><li class="tocline"><a class="tocxref" href="#cryptographic-algorithm-identifier-type-algorithmidentifier"><span class="secno">4.5.3 </span>Cryptographic Algorithm Identifier (type <span data-link-type="dfn" class="formerLink">AlgorithmIdentifier</span>)</a></li><li class="tocline"><a class="tocxref" href="#fido-assertion-interface-fidoassertion"><span class="secno">4.5.4 </span>FIDO Assertion (interface <span data-dfn-type="dfn">FIDOAssertion</span>)</a></li><li class="tocline"><a class="tocxref" href="#fido-assertion-extensions-dictionary-fidoextensions"><span class="secno">4.5.5 </span>FIDO Assertion Extensions (dictionary <span data-dfn-type="dfn">FIDOExtensions</span>)</a></li><li class="tocline"><a class="tocxref" href="#key-attestation-statement-interface-attestationstatement"><span class="secno">4.5.6 </span>Key Attestation Statement (interface <span data-dfn-type="dfn">AttestationStatement</span>)</a></li></ul></li></ul></li><li class="tocline"><a class="tocxref" href="#sample-scenarios"><span class="secno">5. </span>Sample scenarios</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#registration"><span class="secno">5.1 </span>Registration</a></li><li class="tocline"><a class="tocxref" href="#authentication"><span class="secno">5.2 </span>Authentication</a></li><li class="tocline"><a class="tocxref" href="#decommissioning"><span class="secno">5.3 </span>Decommissioning</a></li></ul></li><li class="tocline"><a class="tocxref" href="#acknowledgements"><span class="secno">6. </span>Acknowledgements</a></li><li class="tocline"><a class="tocxref" href="#references"><span class="secno">A. </span>References</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><span class="secno">A.1 </span>Normative references</a></li><li class="tocline"><a class="tocxref" href="#informative-references"><span class="secno">A.2 </span>Informative references</a></li></ul></li></ul></section>


<section property="bibo:hasPart" resource="#use-cases" typeof="bibo:Chapter" id="use-cases" class="informative">
  <!--OddPage--><h2 resource="#h-use-cases" id="h-use-cases"><span property="xhv:role" resource="xhv:heading"><span class="secno">1. </span>Use Cases</span></h2><p><em>This section is non-normative.</em></p>

  <p>This specification defines an API for web pages to access FIDO 2.0 credentials through JavaScript, for the purpose of strongly authenticating a user. FIDO 2.0 credentials are always bound to a single FIDO Relying Party, and the API respects this requirement. Credentials created by a Relying Party can only be accessed by web origins belonging to that Relying Party. Additionally, privacy across Relying Parties must be maintained; scripts must not be able to detect any properties, or even the existence, of credentials belonging to other Relying Parties.</p>

  <p>FIDO 2.0 credentials are located on authenticators, which can use them to perform operations subject to user consent. Broadly, authenticators are of two types:</p>

  <ol>
    <li><dfn id="dfn-embedded-authenticators" data-dfn-type="dfn">Embedded authenticators</dfn> have their operation managed by the same computing device (e.g., smart phone, tablet, desktop PC) as the user agent is running on. For instance, such an authenticator might consist of a Trusted Platform Module (TPM) or Secure Element (SE) integrated into the computing device, along with appropriate platform software to mediate access to this device's functionality.</li>
    <li><dfn id="dfn-external-authenticators" data-dfn-type="dfn">External authenticators</dfn> operate autonomously from the device running the user agent, and accessed over a transport such as Universal Serial Bus (USB), Bluetooth Low Energy (BLE) or Near Field Communications (NFC).</li>
  </ol>

  <p>Note that an external authenticator may itself contain an embedded authenticator. For example, consider a smart phone that contains a FIDO 2.0 credential. The credential may be accessed by a web browser running on the phone itself. In this case the module containing the credential is functioning as an embedded authenticator. However, the credential may also be accessed over BLE by a user agent on a nearby laptop. In this latter case, the phone is functioning as an external authenticator. These modes may even be used in a single end-to-end user scenario. One such scenario is described in the remainder of this section.</p>



  <section property="bibo:hasPart" resource="#registration-embedded-authenticator-mode" typeof="bibo:Chapter" id="registration-embedded-authenticator-mode">
    <h3 resource="#h-registration-embedded-authenticator-mode" id="h-registration-embedded-authenticator-mode"><span property="xhv:role" resource="xhv:heading"><span class="secno">1.1 </span>Registration (embedded authenticator mode)</span></h3>

    <ul>
      <li>
        On the phone:
        <ul>
          <li>User goes to example.com in the browser, and signs in using whatever method they have been using (possibly a pre-FIDO method such as a password).</li>
          <li>The phone prompts, "Do you want to register this device with example.com?"</li>
          <li>User agrees.</li>
          <li>The phone prompts the user for a previously configured authorization gesture (PIN, biometric, etc.); the user provides this.</li>
          <li>Website shows message, "Registration complete."</li>
        </ul>
      </li>
    </ul>
  </section>


  <section property="bibo:hasPart" resource="#authentication-external-authenticator-mode" typeof="bibo:Chapter" id="authentication-external-authenticator-mode">
    <h3 resource="#h-authentication-external-authenticator-mode" id="h-authentication-external-authenticator-mode"><span property="xhv:role" resource="xhv:heading"><span class="secno">1.2 </span>Authentication (external authenticator mode)</span></h3>

    <ul>
      <li>
        On the laptop:
        <ul>
          <li>User goes to example.com in browser, sees an option "Sign in with your phone."</li>
          <li>User chooses this option and gets a message from the browser, "Please complete this action on your phone."</li>
        </ul>
      </li>

      <li>
        Next, on the phone:
        <ul>
          <li>User sees a discreet prompt or notification, "Sign in to example.com."</li>
          <li>User selects this prompt / notification.</li>
          <li>User is shown a list of their example.com identities, e.g., "Sign in as Alice / Sign in as Bob."</li>
          <li>User picks an identity, is prompted for an authorization gesture (PIN, biometric, etc.) and provides this.</li>
        </ul>
      </li>

      <li>
        Now, on the laptop:
        <ul>
          <li>Web page shows that the selected user is signed in, and navigates to the signed-in page.</li>
        </ul>
      </li>
    </ul>

  </section>


  <section property="bibo:hasPart" resource="#other-configurations" typeof="bibo:Chapter" id="other-configurations">
    <h3 resource="#h-other-configurations" id="h-other-configurations"><span property="xhv:role" resource="xhv:heading"><span class="secno">1.3 </span>Other configurations</span></h3>

    <p>A variety of additional use cases and configurations are also possible, including (but not limited to):</p>

    <ul>
      <li>User goes to example.com on their laptop, is guided through a flow to create and register a credential on their phone.</li>
      <li>User employs a FIDO 2.0 credential as described above to authorize a single transaction, such as a payment or other financial transaction.</li>
    </ul>
  </section>

</section> <!-- use cases -->

<section property="bibo:hasPart" resource="#conformance" typeof="bibo:Chapter" id="conformance"><!--OddPage--><h2 resource="#h-conformance" id="h-conformance"><span property="xhv:role" resource="xhv:heading"><span class="secno">2. </span>Conformance</span></h2>
<p>
  As well as sections marked as non-normative, all authoring guidelines, diagrams, examples,
  and notes in this specification are non-normative. Everything else in this specification is
  normative.
</p>
<p id="respecRFC2119">The key words <em class="rfc2119" title="MAY">MAY</em>, <em class="rfc2119" title="MUST">MUST</em>, and <em class="rfc2119" title="SHOULD">SHOULD</em> are 
  to be interpreted as described in [<cite><a href="#bib-RFC2119" class="bibref">RFC2119</a></cite>].
</p>


  <p>This specification defines criteria for a <dfn id="dfn-conforming-user-agent" data-dfn-type="dfn">conforming user agent</dfn>. A user agent <em title="MUST" class="rfc2119">MUST</em> behave as described in this specification in order to be considered conformant. User agents <em title="MAY" class="rfc2119">MAY</em> implement algorithms given in this specification in any way desired, so long as the end result is indistinguishable from the result that would be obtained by the specification's algorithms. A conforming FIDO Credential API user agent <em title="MUST" class="rfc2119">MUST</em> also be a conforming implementation of the IDL fragments of this specification, as described in the “Web IDL” specification. [<cite><a href="#bib-WebIDL-1" class="bibref">WebIDL-1</a></cite>]</p>

  <section property="bibo:hasPart" resource="#dependencies" typeof="bibo:Chapter" id="dependencies">
    <h3 resource="#h-dependencies" id="h-dependencies"><span property="xhv:role" resource="xhv:heading"><span class="secno">2.1 </span>Dependencies</span></h3>

    <p>This specification relies on several other underlying specifications.</p>

    <dl>
      <dt>HTML5</dt>
      <dd>The concept of <dfn id="dfn-origin" data-dfn-type="dfn">origin</dfn> and the <dfn data-idl="" id="dom-window" data-dfn-type="dfn" data-dfn-for=""><code>Window</code></dfn> interface are defined in [<cite><a href="#bib-HTML5" class="bibref">HTML5</a></cite>].</dd>

      <dt>Web IDL</dt>
      <dd>Many of the interface definitions and all of the IDL in this specification depend on [<cite><a href="#bib-WebIDL-1" class="bibref">WebIDL-1</a></cite>]. This updated version of the Web IDL standard adds support for <dfn id="dfn-promises" data-dfn-type="dfn">Promises</dfn>, which are now the preferred mechanism for asynchronous interaction in all new web APIs.</dd>

      <dt>DOM</dt>
      <dd><dfn id="dfn-domexception" data-dfn-type="dfn">DOMException</dfn> and the DOMException values used in this specification are defined in [<cite><a href="#bib-DOM4" class="bibref">DOM4</a></cite>].</dd>

      <dt>Web Cryptography API</dt>
      <dd>The <dfn id="dfn-algorithmidentifier" data-dfn-type="dfn">AlgorithmIdentifier</dfn> type and the method for normalizing an algorithm are defined in [<cite><a href="#bib-WebCryptoAPI" class="bibref">WebCryptoAPI</a></cite>].</dd>
    </dl>
  </section>

</section>


<section property="bibo:hasPart" resource="#fido-authenticator-model" typeof="bibo:Chapter" id="fido-authenticator-model">
  <!--OddPage--><h2 resource="#h-fido-authenticator-model" id="h-fido-authenticator-model"><span property="xhv:role" resource="xhv:heading"><span class="secno">3. </span>FIDO Authenticator model</span></h2>
  
  <p>The API defined in this specification implies a specific abstract functional model for a FIDO authenticator. This section describes the FIDO authenticator model. Client platforms may implement and expose this abstract model in any way desired. However, the behavior of the client's FIDO Credential API implementation, when operating on the embedded and external authenticators supported by that platform, <em title="MUST" class="rfc2119">MUST</em> be indistinguishable from the behavior specified in the <a href="#api">FIDO Credential API</a> section.</p>
  
  <p>In this abstract model, each FIDO authenticator stores some number of FIDO credentials. Each FIDO credential has an identifier which is unique (or extremely unlikely to be duplicated) among all FIDO credentials. Each credential is also associated with a FIDO Relying Party, whose identity is represented by a Relying Party Identifier (RP ID).</p>
  
  <p>A client must connect to a FIDO authenticator in order to invoke any of the operations of that authenticator. This connection defines an authenticator session. A FIDO authenticator must maintain isolation between sessions. It may do this by only allowing one session to exist at any particular time, or by providing more complicated session management.</p>
  
  <p>The following operations can be invoked by the client in an authenticator session.</p>
  
  <section property="bibo:hasPart" resource="#the-authenticatormakecredential-operation" typeof="bibo:Chapter" id="the-authenticatormakecredential-operation" data-link-for="FIDOCredentials">
    <h3 resource="#h-the-authenticatormakecredential-operation" id="h-the-authenticatormakecredential-operation"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.1 </span>The <dfn id="dfn-authenticatormakecredential" data-dfn-type="dfn">authenticatorMakeCredential</dfn> operation</span></h3>
    
    <p>This operation must be invoked in an authenticator session which has no other operations in progress. It takes the following input parameters:</p>
    
    <ul>
      <li>The web origin of the script on whose behalf the operation is being initiated, as determined by the user agent and the client.</li>
      <li>The RP ID corresponding to the above web origin, as determined by the user agent and the client.</li>
      <li>All input parameters accepted by the <a data-link-type="dfn" class="internalDFN" href="#dom-fidocredentials-makecredential"><code><code>makeCredential</code></code></a> method, specified below.</li>
    </ul>

    <p>When this operation is invoked, the authenticator obtains user consent for creating a new credential. The prompt for obtaining this consent is shown by the authenticator if it has its own output capability, or by the user agent otherwise. Once user consent is obtained, the authenticator generates the appropriate cryptographic keys and creates a new credential. It then associates the credential with the specified RP ID such that it will be able to retrieve the RP ID later, given the credential ID.</p>
    
    <p>On successful completion of this operation, the authenticator returns the type and unique identifier of this new credential to the user agent.</p>

    <p>If the user refuses consent, the authenticator returns an  appropriate error status to the client.</p>
  </section>

  <section property="bibo:hasPart" resource="#the-authenticatorgetassertion-operation" typeof="bibo:Chapter" id="the-authenticatorgetassertion-operation" data-link-for="FIDOCredentials">
    <h3 resource="#h-the-authenticatorgetassertion-operation" id="h-the-authenticatorgetassertion-operation"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.2 </span>The <dfn id="dfn-authenticatorgetassertion" data-dfn-type="dfn">authenticatorGetAssertion</dfn> operation</span></h3>

    <p>This operation must be invoked in an authenticator session which has no other operations in progress. It takes the following input parameters:</p>
    
    <ul>
      <li>The web origin of the script on whose behalf the operation is being initiated, as determined by the user agent and the client.</li>
      <li>The RP ID corresponding to the above web origin, as determined by the user agent and the client.</li>
      <li>All input parameters accepted by the <a data-link-type="dfn" class="internalDFN" href="#dom-fidocredentials-getassertion"><code><code>getAssertion</code></code></a> method, specified below.</li>
    </ul>

    <p>When this method is invoked, the authenticator allows the user to select a credential from among the credentials associated with that Relying Party and matching the specified criteria, then obtains user consent for using that credential. The prompt for obtaining this consent may be shown by the authenticator if it has its own output capability, or by the user agent otherwise. Once a credential is selected and user consent is obtained, the authenticator computes a cryptographic signature using the credential's private key and constructs an assertion as specified in [<cite><a href="#bib-FIDOSignatureFormat" class="bibref">FIDOSignatureFormat</a></cite>]. It then returns this assertion to the user agent.</p>

    <p>If the authenticator cannot find any credential corresponding to the specified Relying Party that matches the specified criteria, it terminates the operation and returns an error.</p>

    <p>If the user refuses consent, the authenticator returns an appropriate error status to the client.</p>
  </section>

  <section property="bibo:hasPart" resource="#the-authenticatorcancel-operation" typeof="bibo:Chapter" id="the-authenticatorcancel-operation">
    <h3 resource="#h-the-authenticatorcancel-operation" id="h-the-authenticatorcancel-operation"><span property="xhv:role" resource="xhv:heading"><span class="secno">3.3 </span>The <dfn id="dfn-authenticatorcancel" data-dfn-type="dfn">authenticatorCancel</dfn> operation</span></h3>
    
    <p>This operation takes no input parameters and returns no result.</p>

    <p>When this operation is invoked by the client in an authenticator session, it has the effect of terminating any <a data-link-type="dfn" class="internalDFN" href="#dfn-authenticatormakecredential"><code>authenticatorMakeCredential</code></a> or <a data-link-type="dfn" class="internalDFN" href="#dfn-authenticatorgetassertion"><code>authenticatorGetAssertion</code></a> operation currently in progress in that authenticator session. The authenticator stops prompting for, or accepting, any user input related to authorizing the canceled operation. The client ignores any further responses from the authenticator for the canceled operation.</p>
    
    <p>This operation is ignored if it is invoked in an authenticator session which does not have an <a data-link-type="dfn" class="internalDFN" href="#dfn-authenticatormakecredential"><code>authenticatorMakeCredential</code></a> or <a data-link-type="dfn" class="internalDFN" href="#dfn-authenticatorgetassertion"><code>authenticatorGetAssertion</code></a> operation currently in progress.</p>
  </section>
</section>


<section property="bibo:hasPart" resource="#api" typeof="bibo:Chapter" id="api">
  <!--OddPage--><h2 resource="#h-api" id="h-api"><span property="xhv:role" resource="xhv:heading"><span class="secno">4. </span>FIDO Credential API</span></h2>

  <p>This section normatively specifies the API for creating and using FIDO 2.0 credentials. Support for deleting credentials is deliberately omitted; this is expected to be done through platform-specific user interfaces rather than from a script. The basic idea is that the credentials belong to the user and are managed by the browser and underlying platform. Scripts can (with the user's consent) request the browser to create a new credential for future use by the script's origin. Scripts can also request the user’s permission to perform authentication operations with an existing credential held by the platform. However, all such operations are mediated by the browser and/or platform on the user's behalf. At no point does the script get access to the credentials themselves; it only gets information about the credentials in the form of objects.</p>

  <p>User agents <em title="SHOULD" class="rfc2119">SHOULD</em> only expose this API to callers in <dfn id="dfn-secure-contexts" data-dfn-type="dfn">secure contexts</dfn>, as defined in [<cite><a href="#bib-powerful-features" class="bibref">powerful-features</a></cite>].</p>

  <p>In the future, this API may be integrated into a more general Web API framework for credential management, which is being worked on in the <abbr title="World Wide Web Consortium">W3C</abbr>. Such integration will, most likely, create intermediate interface and dictionary types, from which the types in this specification will then inherit. However the experience of the FIDO developer and end user will not be substantially changed by this. In the meantime, this specification is maintained in a more minimal form for ease of review.</p>

  <p>The API is defined by the following Web IDL fragment.</p>

  <pre class="idl"><span class="idlInterface" id="idl-def-window" data-idl="" data-title="Window">partial interface <span class="idlInterfaceID"><a data-for="" data-link-type="dfn" class="internalDFN" href="#dom-window" data-lt="Window"><code>Window</code></a></span> {
<span data-dfn-for="window" class="idlAttribute" id="idl-def-window-fido" data-idl="" data-title="fido">    readonly    attribute <span class="idlAttrType"><a data-link-type="dfn" class="internalDFN" href="#dom-fidocredentials"><code>FIDOCredentials</code></a></span> <span class="idlAttrName">fido</span>;</span>
};</span>

<span class="idlInterface" id="idl-def-fidocredentials" data-idl="" data-title="FIDOCredentials">interface <span class="idlInterfaceID"><a data-for="" data-link-type="dfn" class="internalDFN" href="#dom-fidocredentials" data-lt="FIDOCredentials"><code>FIDOCredentials</code></a></span> {
<span data-dfn-for="fidocredentials" class="idlMethod" id="idl-def-fidocredentials-makecredential(account,sequence<fidocredentialparameters>,domstring,optional-unsigned_long,optional-sequence<credential>,optional-fidoextensions)" data-idl="" data-title="makeCredential">    <span class="idlMethType">Promise&lt;<a data-link-type="dfn" class="internalDFN" href="#dom-fidocredentialinfo"><code>FIDOCredentialInfo</code></a>&gt;</span> <span class="idlMethName"><a data-for="FIDOCredentials" data-link-type="dfn" class="internalDFN" href="#dom-fidocredentials-makecredential" data-lt="makeCredential"><code>makeCredential</code></a></span>(<span class="idlParam"><span class="idlParamType"><a data-link-type="dfn" class="internalDFN" href="#dom-account"><code>Account</code></a></span> <span class="idlParamName">accountInformation</span></span>, <span class="idlParam"><span class="idlParamType">sequence&lt;<a data-link-type="dfn" class="internalDFN" href="#dom-fidocredentialparameters"><code>FIDOCredentialParameters</code></a>&gt;</span> <span class="idlParamName">cryptoParameters</span></span>, <span class="idlParam"><span class="idlParamType">DOMString</span> <span class="idlParamName">attestationChallenge</span></span>, <span class="idlParam">optional <span class="idlParamType">unsigned long</span> <span class="idlParamName">credentialTimeoutSeconds</span></span>, <span class="idlParam">optional <span class="idlParamType">sequence&lt;<a data-link-type="dfn" class="internalDFN" href="#dom-credential"><code>Credential</code></a>&gt;</span> <span class="idlParamName">blacklist</span></span>, <span class="idlParam">optional <span class="idlParamType"><a data-link-type="dfn" class="internalDFN" href="#dfn-fidoextensions">FIDOExtensions</a></span> <span class="idlParamName">credentialExtensions</span></span>);</span>

<span data-dfn-for="fidocredentials" class="idlMethod" id="idl-def-fidocredentials-getassertion(domstring,optional-unsigned_long,optional-sequence<credential>,optional-fidoextensions)" data-idl="" data-title="getAssertion">    <span class="idlMethType">Promise&lt;<a data-link-type="dfn" class="internalDFN" href="#dfn-fidoassertion">FIDOAssertion</a>&gt;</span>      <span class="idlMethName"><a data-for="FIDOCredentials" data-link-type="dfn" class="internalDFN" href="#dom-fidocredentials-getassertion" data-lt="getAssertion"><code>getAssertion</code></a></span>(<span class="idlParam"><span class="idlParamType">DOMString</span> <span class="idlParamName">assertionChallenge</span></span>, <span class="idlParam">optional <span class="idlParamType">unsigned long</span> <span class="idlParamName">assertionTimeoutSeconds</span></span>, <span class="idlParam">optional <span class="idlParamType">sequence&lt;<a data-link-type="dfn" class="internalDFN" href="#dom-credential"><code>Credential</code></a>&gt;</span> <span class="idlParamName">whitelist</span></span>, <span class="idlParam">optional <span class="idlParamType"><a data-link-type="dfn" class="internalDFN" href="#dfn-fidoextensions">FIDOExtensions</a></span> <span class="idlParamName">assertionExtensions</span></span>);</span>
};</span>

<span class="idlInterface" id="idl-def-fidocredentialinfo" data-idl="" data-title="FIDOCredentialInfo">interface <span class="idlInterfaceID"><a data-for="" data-link-type="dfn" class="internalDFN" href="#dom-fidocredentialinfo" data-lt="FIDOCredentialInfo"><code>FIDOCredentialInfo</code></a></span> {
<span data-dfn-for="fidocredentialinfo" class="idlAttribute" id="idl-def-fidocredentialinfo-credential" data-idl="" data-title="credential">    readonly    attribute <span class="idlAttrType"><a data-link-type="dfn" class="internalDFN" href="#dom-credential"><code>Credential</code></a></span>           <span class="idlAttrName"><a data-for="FIDOCredentialInfo" data-link-type="dfn" class="internalDFN" href="#dom-fidocredentialinfo-credential" data-lt="credential"><code>credential</code></a></span>;</span>
<span data-dfn-for="fidocredentialinfo" class="idlAttribute" id="idl-def-fidocredentialinfo-algorithm" data-idl="" data-title="algorithm">    readonly    attribute <span class="idlAttrType"><a data-link-type="dfn" class="internalDFN" href="#dfn-algorithmidentifier">AlgorithmIdentifier</a></span>  <span class="idlAttrName"><a data-for="FIDOCredentialInfo" data-link-type="dfn" class="internalDFN" href="#dom-fidocredentialinfo-algorithm" data-lt="algorithm"><code>algorithm</code></a></span>;</span>
<span data-dfn-for="fidocredentialinfo" class="idlAttribute" id="idl-def-fidocredentialinfo-publickey" data-idl="" data-title="publicKey">    readonly    attribute <span class="idlAttrType">any</span>                  <span class="idlAttrName"><a data-for="FIDOCredentialInfo" data-link-type="dfn" class="internalDFN" href="#dom-fidocredentialinfo-publickey" data-lt="publicKey"><code>publicKey</code></a></span>;</span>
<span data-dfn-for="fidocredentialinfo" class="idlAttribute" id="idl-def-fidocredentialinfo-attestation" data-idl="" data-title="attestation">    readonly    attribute <span class="idlAttrType"><a data-link-type="dfn" class="internalDFN" href="#dfn-attestationstatement">AttestationStatement</a></span> <span class="idlAttrName"><a data-for="FIDOCredentialInfo" data-link-type="dfn" class="internalDFN" href="#dom-fidocredentialinfo-attestation" data-lt="attestation"><code>attestation</code></a></span>;</span>
};</span>

<span class="idlDictionary" id="idl-def-account" data-idl="" data-title="Account">dictionary <span class="idlDictionaryID"><a data-for="" data-link-type="dfn" class="internalDFN" href="#dom-account" data-lt="Account"><code>Account</code></a></span> {
<span data-dfn-for="account" class="idlMember" id="idl-def-account-rpdisplayname" data-idl="" data-title="rpDisplayName">    required <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-for="Account" data-link-type="dfn" class="internalDFN" href="#dom-account-rpdisplayname" data-lt="rpDisplayName"><code>rpDisplayName</code></a></span>;</span>
<span data-dfn-for="account" class="idlMember" id="idl-def-account-displayname" data-idl="" data-title="displayName">    required <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-for="Account" data-link-type="dfn" class="internalDFN" href="#dom-account-displayname" data-lt="displayName"><code>displayName</code></a></span>;</span>
<span data-dfn-for="account" class="idlMember" id="idl-def-account-name" data-idl="" data-title="name">             <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-for="Account" data-link-type="dfn" class="internalDFN" href="#dom-account-name" data-lt="name"><code>name</code></a></span>;</span>
<span data-dfn-for="account" class="idlMember" id="idl-def-account-id" data-idl="" data-title="id">             <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-for="Account" data-link-type="dfn" class="internalDFN" href="#dom-account-id" data-lt="id"><code>id</code></a></span>;</span>
<span data-dfn-for="account" class="idlMember" id="idl-def-account-imageuri" data-idl="" data-title="imageUri">             <span class="idlMemberType">DOMString</span> <span class="idlMemberName"><a data-for="Account" data-link-type="dfn" class="internalDFN" href="#dom-account-imageuri" data-lt="imageUri"><code>imageUri</code></a></span>;</span>
};</span>

<span class="idlDictionary" id="idl-def-fidocredentialparameters" data-idl="" data-title="FIDOCredentialParameters">dictionary <span class="idlDictionaryID"><a data-for="" data-link-type="dfn" class="internalDFN" href="#dom-fidocredentialparameters" data-lt="FIDOCredentialParameters"><code>FIDOCredentialParameters</code></a></span> {
<span data-dfn-for="fidocredentialparameters" class="idlMember" id="idl-def-fidocredentialparameters-type" data-idl="" data-title="type">    required <span class="idlMemberType"><a data-link-type="dfn" class="internalDFN" href="#dom-credentialtype"><code>CredentialType</code></a></span>      <span class="idlMemberName"><a data-for="FIDOCredentialParameters" data-link-type="dfn" class="internalDFN" href="#dom-fidocredentialparameters-type" data-lt="type"><code>type</code></a></span>;</span>
<span data-dfn-for="fidocredentialparameters" class="idlMember" id="idl-def-fidocredentialparameters-algorithm" data-idl="" data-title="algorithm">    required <span class="idlMemberType"><a data-link-type="dfn" class="internalDFN" href="#dfn-algorithmidentifier">AlgorithmIdentifier</a></span> <span class="idlMemberName"><a data-for="FIDOCredentialParameters" data-link-type="dfn" class="internalDFN" href="#dom-fidocredentialparameters-algorithm" data-lt="algorithm"><code>algorithm</code></a></span>;</span>
};</span>

<span class="idlEnum" id="idl-def-credentialtype" data-idl="" data-title="CredentialType">enum <span class="idlEnumID"><a data-for="" data-link-type="dfn" class="internalDFN" href="#dom-credentialtype" data-lt="CredentialType"><code>CredentialType</code></a></span> {
    "<a href="#idl-def-.FIDO" class="idlEnumItem">FIDO</a>"
};</span>

<span class="idlInterface" id="idl-def-credential" data-idl="" data-title="Credential">interface <span class="idlInterfaceID"><a data-for="" data-link-type="dfn" class="internalDFN" href="#dom-credential" data-lt="Credential"><code>Credential</code></a></span> {
<span data-dfn-for="credential" class="idlAttribute" id="idl-def-credential-type" data-idl="" data-title="type">    readonly    attribute <span class="idlAttrType"><a data-link-type="dfn" class="internalDFN" href="#dom-credentialtype"><code>CredentialType</code></a></span> <span class="idlAttrName"><a data-for="Credential" data-link-type="dfn" class="internalDFN" href="#dom-credential-type" data-lt="type"><code>type</code></a></span>;</span>
<span data-dfn-for="credential" class="idlAttribute" id="idl-def-credential-id" data-idl="" data-title="id">    readonly    attribute <span class="idlAttrType">DOMString</span>      <span class="idlAttrName"><a data-for="Credential" data-link-type="dfn" class="internalDFN" href="#dom-credential-id" data-lt="id"><code>id</code></a></span>;</span>
};</span></pre>

  <section property="bibo:hasPart" resource="#fidocredentials-interface" typeof="bibo:Chapter" id="fidocredentials-interface">
    <h3 resource="#h-fidocredentials-interface" id="h-fidocredentials-interface"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.1 </span><dfn data-idl="" id="dom-fidocredentials" data-dfn-type="dfn" data-dfn-for=""><code>FIDOCredentials</code></dfn> Interface</span></h3>

    <p>This interface consists of the following methods.</p>

    <section property="bibo:hasPart" resource="#create-a-new-credential-makecredential-method" typeof="bibo:Chapter" id="create-a-new-credential-makecredential-method" data-dfn-for="fidocredentials">
      <h4 resource="#h-create-a-new-credential-makecredential-method" id="h-create-a-new-credential-makecredential-method"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.1.1 </span>Create a new credential (<dfn data-idl="" id="dom-fidocredentials-makecredential" data-dfn-type="dfn" data-dfn-for="fidocredentials"><code>makeCredential</code></dfn> method)</span></h4>

      <p>With this method, a script can request the user agent to create a new credential of a given type and persist it to the underlying platform, which may involve data storage managed by the browser or the OS. The user agent will prompt the user to approve this operation. On success, the promise will be resolved with a FIDOCredentialInfo object describing the newly created credential.</p>

      <p>This method takes the following parameters:</p>

      <ul>
        <li>The <dfn id="dfn-accountinformation" data-dfn-type="dfn">accountInformation</dfn> parameter specifies information about the user account for which the credential is being created. This is meant for later use by the authenticator when it needs to prompt the user to select a credential.</li>

        <li>The <dfn id="dfn-cryptoparameters" data-dfn-type="dfn">cryptoParameters</dfn> parameter supplies information about the desired properties of the credential to be created. The sequence is ordered from most preferred to least preferred. The platform makes a best effort to create the most preferred credential that it can.</li>

        <li>The <dfn id="dfn-attestationchallenge" data-dfn-type="dfn">attestationChallenge</dfn> parameter contains a challenge intended to be used for generating the attestation statement of the newly created credential.</li>

        <li>The optional <dfn id="dfn-credentialtimeoutseconds" data-dfn-type="dfn">credentialTimeoutSeconds</dfn> parameter specifies a time, in seconds, that the caller is willing to wait for the call to complete. This is treated as a hint, and may be overridden by the platform.</li>

        <li>The optional <dfn id="dfn-blacklist" data-dfn-type="dfn">blacklist</dfn> parameter is intended for use by Relying Parties that wish to limit the creation of multiple credentials for the same account on a single authenticator. The platform is requested to return an error if the new credential would be created on an authenticator that also contains one of the credentials enumerated in this parameter.</li>

        <li>The optional <dfn id="dfn-credentialextensions" data-dfn-type="dfn">credentialExtensions</dfn> parameter contains additional parameters requesting additional processing by the client and authenticator. For example, the caller may request that only authenticators with certain capabilities be used to create the credential, or that additional information be returned in the attestation statement. Alternatively, the caller may specify an additional message that they would like the authenticator to display to the user. Extensions are defined in [<cite><a href="#bib-FIDOSignatureFormat" class="bibref">FIDOSignatureFormat</a></cite>].</li>
      </ul>

      <p>When this method is invoked, the user agent <em title="MUST" class="rfc2119">MUST</em> execute the following algorithm:</p><p>

      </p><ol type="1">


        <li>If <a data-link-type="dfn" class="internalDFN" href="#dfn-credentialtimeoutseconds"><code>credentialTimeoutSeconds</code></a> was specified, check if its value lies within a reasonable range as defined by the platform and if not, correct it to the closest value lying within that range. Set <var>adjustedTimeout</var> to this adjusted value. If <a data-link-type="dfn" class="internalDFN" href="#dfn-credentialtimeoutseconds"><code>credentialTimeoutSeconds</code></a> was not specified then set <var>adjustedTimeout</var> to a platform-specific default.</li>

        <li>Let <var>promise</var> be a new <a data-link-type="dfn" class="internalDFN" href="#dfn-promises" data-lt="Promises">Promise</a>. Return <var>promise</var> and start a timer for <var>adjustedTimeout</var> seconds. Then asynchronously continue executing the following steps.</li>

        <li>Set <var>callerOrigin</var> to the <a data-link-type="dfn" class="internalDFN" href="#dfn-origin"><code>origin</code></a> of the caller. Derive the RP ID from <var>callerOrigin</var> by computing the "public suffix + 1" or "PS+1" (which is also referred to as the "Effective Top-Level Domain plus One" or "eTLD+1") part of <var>callerOrigin</var> [<cite><a href="#bib-PSL" class="bibref">PSL</a></cite>]. Set <var>rpId</var> to the RP ID.</li>

        <li>Initialize <var>issuedRequests</var> to an empty list.</li>

        <li>
          Process each element of <a data-link-type="dfn" class="internalDFN" href="#dfn-cryptoparameters"><code>cryptoParameters</code></a> using the following steps:

          <ol type="a">

            <li>Let <var>current</var> be the currently selected element of <a data-link-type="dfn" class="internalDFN" href="#dfn-cryptoparameters"><code>cryptoParameters</code></a>.</li>

            <li>If <var>current.type</var> does not contain a <a data-link-type="dfn" class="internalDFN" href="#dom-credentialtype"><code><code>CredentialType</code></code></a> supported by this implementation, then stop processing <var>current</var> and move on to the next element in <a data-link-type="dfn" class="internalDFN" href="#dfn-cryptoparameters"><code>cryptoParameters</code></a>.</li>

            <li>Let <var>normalizedAlgorithm</var> be the result of normalizing an algorithm using the procedure defined in [<cite><a href="#bib-WebCryptoAPI" class="bibref">WebCryptoAPI</a></cite>], with <var>alg</var> set to <var>current.algorithm</var> and <var>op</var> set to "generateKey". If an error occurs during this procedure, then stop processing <var>current</var> and move on to the next element in <a data-link-type="dfn" class="internalDFN" href="#dfn-cryptoparameters"><code>cryptoParameters</code></a>.</li>

          </ol>
        </li>

        <li>If <a data-link-type="dfn" class="internalDFN" href="#dfn-blacklist"><code>blacklist</code></a> is undefined, set it to the empty list.</li>

        <li>If <a data-link-type="dfn" class="internalDFN" href="#dfn-credentialextensions"><code>credentialExtensions</code></a> was specified, process any extensions supported by this client platform, to produce the extension data that needs to be sent to the authenticator. Call this data <var>clientExtensions</var>.</li>

        <li>For each embedded or external authenticator currently available on this platform: asynchronously invoke the <a data-link-type="dfn" class="internalDFN" href="#dfn-authenticatormakecredential"><code>authenticatorMakeCredential</code></a> operation on that authenticator with <var>callerOrigin</var>, <var>rpId</var>, <a data-link-type="dfn" class="internalDFN" href="#dfn-accountinformation"><code>accountInformation</code></a>, <var>current.type</var>, <var>normalizedAlgorithm</var>, <a data-link-type="dfn" class="internalDFN" href="#dfn-blacklist"><code>blacklist</code></a>, <a data-link-type="dfn" class="internalDFN" href="#dfn-attestationchallenge"><code>attestationChallenge</code></a> and <var>clientExtensions</var> as parameters. Add a corresponding entry to <var>issuedRequests</var>.</li>

        <li>
          While <var>issuedRequests</var> is not empty, perform the following actions depending upon the <var>adjustedTimeout</var> timer and responses from the authenticators:

          <ol type="a">

            <li>If the <var>adjustedTimeout</var> timer expires, then for each entry in <var>issuedRequests</var> invoke the <a data-link-type="dfn" class="internalDFN" href="#dfn-authenticatorcancel"><code>authenticatorCancel</code></a> operation on that authenticator and remove its entry from the list.</li>

            <li>If any authenticator returns a status indicating that the user cancelled the operation, delete that authenticator's entry from <var>issuedRequests</var>. For each remaining entry in <var>issuedRequests</var> invoke the <a data-link-type="dfn" class="internalDFN" href="#dfn-authenticatorcancel"><code>authenticatorCancel</code></a> operation on that authenticator and remove its entry from the list.</li>

            <li>If any authenticator returns an error status, delete the corresponding entry from <var>issuedRequests</var>.</li>

            <li>If any authenticator indicates success, create a new <a data-link-type="dfn" class="internalDFN" href="#dom-fidocredentialinfo"><code><code>FIDOCredentialInfo</code></code></a> object named <var>value</var> and populate its fields with the values returned from the authenticator. Resolve <var>promise</var> with <var>value</var> and terminate this algorithm.</li>

          </ol>
        </li>

        <li>Resolve <var>promise</var> with a <a data-link-type="dfn" class="internalDFN" href="#dfn-domexception"><code>DOMException</code></a> whose name is "<code>NotFoundError</code>", and terminate this algorithm.</li>

      </ol>

      <p>During the above process, the user agent <em title="SHOULD" class="rfc2119">SHOULD</em> show some UI to the user to guide them in the process of selecting and authorizing an authenticator.</p>

    </section> <!-- create a new credential makeCredential -->


    <section property="bibo:hasPart" resource="#use-an-existing-credential-getassertion-method" typeof="bibo:Chapter" id="use-an-existing-credential-getassertion-method" data-dfn-for="fidocredentials">
      <h4 resource="#h-use-an-existing-credential-getassertion-method" id="h-use-an-existing-credential-getassertion-method"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.1.2 </span>Use an existing credential (<dfn data-idl="" id="dom-fidocredentials-getassertion" data-dfn-type="dfn" data-dfn-for="fidocredentials"><code>getAssertion</code></dfn> method)</span></h4>

      <p>This method is used to discover and use an existing FIDO 2.0 credential, with the user's consent. The script optionally specifies some criteria to indicate what credentials are acceptable to it. The user agent and/or platform locates credentials matching the specified criteria, and guides the user to pick one that the script should be allowed to use. The user may choose not to provide a credential even if one is present, for example to maintain privacy.</p>

      <p>This method takes the following parameters:</p>

      <ul>
        <li>The <dfn id="dfn-assertionchallenge" data-dfn-type="dfn">assertionChallenge</dfn> parameter contains a string that the selected authenticator is expected to sign to produce the assertion.</li>

        <li>The optional <dfn id="dfn-assertiontimeoutseconds" data-dfn-type="dfn">assertionTimeoutSeconds</dfn> parameter specifies a time, in seconds, that the caller is willing to wait for the call to complete. This is treated as a hint, and may be overridden by the platform.</li>

        <li>The optional <dfn id="dfn-whitelist" data-dfn-type="dfn">whitelist</dfn> member contains a list of credentials acceptable to the caller, in order of the caller's preference.</li>

        <li>The optional <dfn id="dfn-assertionextensions" data-dfn-type="dfn">assertionExtensions</dfn> parameter contains additional parameters requesting additional processing by the client and authenticator. For example, if transaction confirmation is sought from the user, then the prompt string would be included in an extension. Extensions are defined in a companion specification.</li>
      </ul>

      <p>When this method is invoked, the user agent <em title="MUST" class="rfc2119">MUST</em> execute the following algorithm:</p><p>

      </p><ol type="1">

        <li>If <a data-link-type="dfn" class="internalDFN" href="#dfn-assertiontimeoutseconds"><code>assertionTimeoutSeconds</code></a> was specified, check if its value lies within a reasonable range as defined by the platform and if not, correct it to the closest value lying within that range. Set <var>adjustedTimeout</var> to this adjusted value. If <a data-link-type="dfn" class="internalDFN" href="#dfn-assertiontimeoutseconds"><code>assertionTimeoutSeconds</code></a> was not specified then set <var>adjustedTimeout</var> to a platform-specific default.</li>

        <li>Let <var>promise</var> be a new <a data-link-type="dfn" class="internalDFN" href="#dfn-promises" data-lt="Promises">Promise</a>. Return <var>promise</var> and start a timer for <var>adjustedTimeout</var> seconds. Then asynchronously continue executing the following steps.</li>

        <li>Set <var>callerOrigin</var> to the <a data-link-type="dfn" class="internalDFN" href="#dfn-origin"><code>origin</code></a> of the caller. Derive the RP ID from <var>callerOrigin</var> by computing the "public suffix + 1" or "PS+1" (which is also referred to as the "Effective Top-Level Domain plus One" or "eTLD+1") part of <var>callerOrigin</var> [<cite><a href="#bib-PSL" class="bibref">PSL</a></cite>]. Set <var>rpId</var> to the RP ID.</li>

        <li>Initialize <var>issuedRequests</var> to an empty list.</li>

        <li>If <a data-link-type="dfn" class="internalDFN" href="#dfn-assertionextensions"><code>assertionExtensions</code></a> was specified, process any extensions supported by this client platform, to produce the extension data that needs to be sent to the authenticator. Call this data <var>clientExtensions</var>.</li>

        <li>
          For each embedded or external authenticator currently available on this platform, perform the following steps:

          <ol type="a">

            <li>If <a data-link-type="dfn" class="internalDFN" href="#dfn-whitelist"><code>whitelist</code></a> is undefined or empty, let <var>credentialList</var> be a list containing a single wildcard entry.</li> <!-- TBD The wildcard syntax needs to be defined and/or referenced here. -->

            <li>If <a data-link-type="dfn" class="internalDFN" href="#dfn-whitelist"><code>whitelist</code></a> is defined and non-empty, optionally execute a platform-specific procedure to determine which of these credentials can possibly be present on this authenticator. Set <var>credentialList</var> to this filtered list. If <var>credentialList</var> is empty, ignore this authenticator and do not perform any of the following per-authenticator steps.</li>

            <li>Asynchronously invoke the <a data-link-type="dfn" class="internalDFN" href="#dfn-authenticatorgetassertion"><code>authenticatorGetAssertion</code></a> operation on this authenticator with <var>callerOrigin</var>, <var>rpId</var>, <a data-link-type="dfn" class="internalDFN" href="#dfn-assertionchallenge"><code>assertionChallenge</code></a>, <var>credentialList</var>, and <var>clientExtensions</var> as parameters.</li>

            <li>Add an entry to <var>issuedRequests</var>, corresponding to this request.</li>

          </ol>
        </li>

        <li>
          While <var>issuedRequests</var> is not empty, perform the following actions depending upon the <var>adjustedTimeout</var> timer and responses from the authenticators:

          <ol type="a">

            <li>If the timer for <var>adjustedTimeout</var> expires, then for each entry in <var>issuedRequests</var> invoke the <a data-link-type="dfn" class="internalDFN" href="#dfn-authenticatorcancel"><code>authenticatorCancel</code></a> operation on that authenticator and remove its entry from the list.</li>

            <li>If any authenticator returns a status indicating that the user cancelled the operation, delete that authenticator's entry from <var>issuedRequests</var>. For each remaining entry in <var>issuedRequests</var> invoke the <a data-link-type="dfn" class="internalDFN" href="#dfn-authenticatorcancel"><code>authenticatorCancel</code></a> operation on that authenticator, and remove its entry from the list.</li>

            <li>If any authenticator returns an error status, delete the corresponding entry from <var>issuedRequests</var>.</li>

            <li>If any authenticator returns success, create a new <a data-link-type="dfn" class="internalDFN" href="#dfn-fidoassertion"><code>FIDOAssertion</code></a> object named <var>value</var> and populate its fields with the values returned from the authenticator. Resolve <var>promise</var> with <code>value</code> and terminate this algorithm.</li>
          </ol>
        </li>

        <li>Resolve <var>promise</var> with a <a data-link-type="dfn" class="internalDFN" href="#dfn-domexception"><code>DOMException</code></a> whose name is "<code>NotFoundError</code>", and terminate this algorithm.</li>

      </ol>

      <p>During the above process, the user agent <em title="SHOULD" class="rfc2119">SHOULD</em> show some UI to the user to guide them in the process of selecting and authorizing an authenticator with which to complete the operation.</p>

    </section> <!-- use existing credential getAssertion-->

  </section>  <!-- FIDOCredentials interface -->


  <section property="bibo:hasPart" resource="#fidocredentialinfo-interface" typeof="bibo:Chapter" id="fidocredentialinfo-interface">
    <h3 resource="#h-fidocredentialinfo-interface" id="h-fidocredentialinfo-interface"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.2 </span><dfn data-idl="" id="dom-fidocredentialinfo" data-dfn-type="dfn" data-dfn-for=""><code>FIDOCredentialInfo</code></dfn> Interface</span></h3>

    <div data-dfn-for="fidocredentialinfo">
      <p>This interface represents a newly-created FIDO credential. It contains information about the credential that can be used to locate it later for use, and also contains metadata that can be used by the FIDO Relying Party to assess the strength of the credential during registration.</p>

      <p>The <dfn data-idl="" id="dom-fidocredentialinfo-credential" data-dfn-type="dfn" data-dfn-for="fidocredentialinfo"><code>credential</code></dfn> attribute contains a unique identifier for the credential represented by this object.</p>

      <p>The <dfn data-idl="" id="dom-fidocredentialinfo-algorithm" data-dfn-type="dfn" data-dfn-for="fidocredentialinfo"><code>algorithm</code></dfn> attribute contains the cryptographic algorithm associated with the credential, in the format defined in [<cite><a href="#bib-WebCryptoAPI" class="bibref">WebCryptoAPI</a></cite>].</p>

      <p>The <dfn data-idl="" id="dom-fidocredentialinfo-publickey" data-dfn-type="dfn" data-dfn-for="fidocredentialinfo"><code>publicKey</code></dfn> attribute contains the public key associated with the credential, represented as a JsonWebKey structure as defined in [<cite><a href="#bib-WebCryptoAPI" class="bibref">WebCryptoAPI</a></cite>].</p>

      <p>The <dfn data-idl="" id="dom-fidocredentialinfo-attestation" data-dfn-type="dfn" data-dfn-for="fidocredentialinfo"><code>attestation</code></dfn> attribute contains a key attestation statement returned by the authenticator. This provides information about the credential and the authenticator it is held in, such as the level of security assurance provided by the authenticator.</p>
    </div>
  </section>


  <section property="bibo:hasPart" resource="#user-account-information-dictionary-account" typeof="bibo:Chapter" id="user-account-information-dictionary-account">
    <h3 resource="#h-user-account-information-dictionary-account" id="h-user-account-information-dictionary-account"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.3 </span>User Account Information (dictionary <dfn data-idl="" id="dom-account" data-dfn-type="dfn" data-dfn-for=""><code>Account</code></dfn>)</span></h3>

    <div data-dfn-for="account">
      <p>This dictionary is used by the caller to specify information about the user account and Relying Party with which a credential is to be associated. It is intended to help the authenticator in providing a friendly credential selection interface for the user.</p>

      <p> The <dfn data-idl="" id="dom-account-rpdisplayname" data-dfn-type="dfn" data-dfn-for="account"><code>rpDisplayName</code></dfn> member contains the friendly name of the Relying Party, such as "Google", "Microsoft" or "PayPal".</p>

      <p>The <dfn data-idl="" id="dom-account-displayname" data-dfn-type="dfn" data-dfn-for="account"><code>displayName</code></dfn> member contains the friendly name associated with the user account by the Relying Party, such as "John P. Smith".</p>

      <p>The <dfn data-idl="" id="dom-account-name" data-dfn-type="dfn" data-dfn-for="account"><code>name</code></dfn> member contains a detailed name for the account, such as "john.p.smith@example.com".</p>

      <p>The <dfn data-idl="" id="dom-account-id" data-dfn-type="dfn" data-dfn-for="account"><code>id</code></dfn> member contains an identifier for the account, stored for the use of the Relying Party. This is not meant to be displayed to the user.</p>

      <p>The <dfn data-idl="" id="dom-account-imageuri" data-dfn-type="dfn" data-dfn-for="account"><code>imageUri</code></dfn> member contains a URI that resolves to the user's account image. This may be a URL that can be used to retrieve the user's current avatar, or a data URI that contains the image data.</p>

    </div>
  </section>


  <section property="bibo:hasPart" resource="#parameters-for-credential-generation-dictionary-fidocredentialparameters" typeof="bibo:Chapter" id="parameters-for-credential-generation-dictionary-fidocredentialparameters">
    <h3 resource="#h-parameters-for-credential-generation-dictionary-fidocredentialparameters" id="h-parameters-for-credential-generation-dictionary-fidocredentialparameters"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.4 </span>Parameters for Credential Generation (dictionary <dfn data-idl="" id="dom-fidocredentialparameters" data-dfn-type="dfn" data-dfn-for=""><code>FIDOCredentialParameters</code></dfn>)</span></h3>

    <div data-dfn-for="fidocredentialparameters">
      <p>This dictionary is used to supply additional parameters when creating a new credential.</p>

      <p>The <dfn data-idl="" id="dom-fidocredentialparameters-type" data-dfn-type="dfn" data-dfn-for="fidocredentialparameters"><code>type</code></dfn> member specifies the type of credential to be created.</p>

      <p>The <dfn data-idl="" id="dom-fidocredentialparameters-algorithm" data-dfn-type="dfn" data-dfn-for="fidocredentialparameters"><code>algorithm</code></dfn> member specifies the cryptographic algorithm with which the newly generated credential will be used.</p> <!-- TBD This should probably say that the type of this field is AlgorithmIdentifier. -->
    </div>
  </section>


  <section property="bibo:hasPart" resource="#supporting-data-structures" typeof="bibo:Chapter" id="supporting-data-structures">
    <h3 resource="#h-supporting-data-structures" id="h-supporting-data-structures"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.5 </span>Supporting Data Structures</span></h3>
    The FIDO credential type uses certain data structures that are specified in supporting specifications. These are as follows.

    <section property="bibo:hasPart" resource="#credential-type-enumeration-enum-credentialtype" typeof="bibo:Chapter" id="credential-type-enumeration-enum-credentialtype">
      <h4 resource="#h-credential-type-enumeration-enum-credentialtype" id="h-credential-type-enumeration-enum-credentialtype"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.5.1 </span>Credential Type enumeration (enum <dfn data-idl="" id="dom-credentialtype" data-dfn-type="dfn" data-dfn-for=""><code>CredentialType</code></dfn>)</span></h4>

      <div data-dfn-for="credentialtype">
        <p>This enumeration defines the valid credential types. It is an extension point; values may be added to it in the future, as more credential types are defined. The values of this enumeration are used for versioning the FIDO assertion and attestation statement according to the type of the authenticator.</p>

        <p>Currently one credential type is defined, namely "<dfn id="dfn-fido" data-dfn-type="dfn">FIDO</dfn>", the FIDO 2.0 credential type.</p>
      </div>
    </section>


    <section property="bibo:hasPart" resource="#unique-identifier-for-credential-interface-credential" typeof="bibo:Chapter" id="unique-identifier-for-credential-interface-credential">
      <h4 resource="#h-unique-identifier-for-credential-interface-credential" id="h-unique-identifier-for-credential-interface-credential"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.5.2 </span>Unique Identifier for Credential (interface <dfn data-idl="" id="dom-credential" data-dfn-type="dfn" data-dfn-for=""><code>Credential</code></dfn>)</span></h4>

      <p>This interface contains the attributes that are returned to the caller when a new credential is created, and can be used later by the caller to select a credential for use.</p>

      <div data-dfn-for="credential">
      <p>The <dfn data-idl="" id="dom-credential-type" data-dfn-type="dfn" data-dfn-for="credential"><code>type</code></dfn> attribute indicates the specification and version that this credential conforms to.</p> <!-- TBD Why isn't this called "version", since it's a version identifier? -->

        <p>The <dfn data-idl="" id="dom-credential-id" data-dfn-type="dfn" data-dfn-for="credential"><code>id</code></dfn> attribute contains an identifier for the credential, chosen by the platform with help from the authenticator. This identifier is used to look up credentials for use, and is therefore expected to be globally unique with high probability across all credentials of the same type. This API does not constrain the format or length of this identifier, except that it must be sufficient for the platform to uniquely select a key. For example, an authenticator without on-board storage may create identifiers that consist of the key material wrapped with a key that is burned into the authenticator.</p>
      </div>
    </section>


    <section property="bibo:hasPart" resource="#cryptographic-algorithm-identifier-type-algorithmidentifier" typeof="bibo:Chapter" id="cryptographic-algorithm-identifier-type-algorithmidentifier">
      <h4 resource="#h-cryptographic-algorithm-identifier-type-algorithmidentifier" id="h-cryptographic-algorithm-identifier-type-algorithmidentifier"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.5.3 </span>Cryptographic Algorithm Identifier (type <a data-link-type="dfn" class="internalDFN" href="#dfn-algorithmidentifier">AlgorithmIdentifier</a>)</span></h4>

      <p>A string or dictionary identifying a cryptographic algorithm and optionally a set of parameters for that algorithm. This type is defined in [<cite><a href="#bib-WebCryptoAPI" class="bibref">WebCryptoAPI</a></cite>].</p>
    </section>


    <section property="bibo:hasPart" resource="#fido-assertion-interface-fidoassertion" typeof="bibo:Chapter" id="fido-assertion-interface-fidoassertion">
      <h4 resource="#h-fido-assertion-interface-fidoassertion" id="h-fido-assertion-interface-fidoassertion"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.5.4 </span>FIDO Assertion (interface <dfn id="dfn-fidoassertion" data-dfn-type="dfn">FIDOAssertion</dfn>)</span></h4>

      <p>FIDO 2.0 credentials produce a cryptographic signature that provides proof of possession of a private key as well as evidence of user consent to a specific transaction. The structure of these signatures is defined in [<cite><a href="#bib-FIDOSignatureFormat" class="bibref">FIDOSignatureFormat</a></cite>].</p>

    </section>


    <section property="bibo:hasPart" resource="#fido-assertion-extensions-dictionary-fidoextensions" typeof="bibo:Chapter" id="fido-assertion-extensions-dictionary-fidoextensions">
      <h4 resource="#h-fido-assertion-extensions-dictionary-fidoextensions" id="h-fido-assertion-extensions-dictionary-fidoextensions"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.5.5 </span>FIDO Assertion Extensions (dictionary <dfn id="dfn-fidoextensions" data-dfn-type="dfn">FIDOExtensions</dfn>)</span></h4>

      <p>This is a dictionary containing zero or more extensions as defined in [<cite><a href="#bib-FIDOSignatureFormat" class="bibref">FIDOSignatureFormat</a></cite>]. An extension is an additional parameter that can be passed to the getAssertion method and triggers some additional processing by the client platform and/or the authenticator.</p>

      <p>
        If the caller wants to pass extensions to the platform, it <em title="SHOULD" class="rfc2119">SHOULD</em> do so by adding one
        entry per extension to this <code>FIDOExtensions</code> dictionary with 
        the extension identifier as the key, and the extension's value as the value
        (see [<cite><a href="#bib-FIDOSignatureFormat" class="bibref">FIDOSignatureFormat</a></cite>] for details).  
      </p>


    </section>


    <section property="bibo:hasPart" resource="#key-attestation-statement-interface-attestationstatement" typeof="bibo:Chapter" id="key-attestation-statement-interface-attestationstatement">
      <h4 resource="#h-key-attestation-statement-interface-attestationstatement" id="h-key-attestation-statement-interface-attestationstatement"><span property="xhv:role" resource="xhv:heading"><span class="secno">4.5.6 </span>Key Attestation Statement (interface <dfn id="dfn-attestationstatement" data-dfn-type="dfn">AttestationStatement</dfn>)</span></h4>

      <p>FIDO 2.0 authenticators also provide some form of key attestation. The basic requirement is that the authenticator can produce, for each credential public key, attestation information that can be verified by a Relying Party. Typically this information contains a signature by an attesting key over the attested public key and a challenge, as well as a certificate or similar information providing provenance information for the attesting key, enabling a trust decision to be made. The structure of these attestation statements is defined in [<cite><a href="#bib-FIDOKeyAttestation" class="bibref">FIDOKeyAttestation</a></cite>].</p>
    </section>

  </section>  <!-- Supporting data structures -->

</section>  <!-- FIDO Credential API -->


<section property="bibo:hasPart" resource="#sample-scenarios" typeof="bibo:Chapter" id="sample-scenarios" class="informative">
  <!--OddPage--><h2 resource="#h-sample-scenarios" id="h-sample-scenarios"><span property="xhv:role" resource="xhv:heading"><span class="secno">5. </span>Sample scenarios</span></h2><p><em>This section is non-normative.</em></p>

  <p>In this section, we walk through some events in the lifecycle of a FIDO 2.0 credential, along with the corresponding sample code for using this API. Note that this is an example flow, and does not limit the scope of how the API can be used.</p>

  <p>As was the case in earlier sections, this flow focuses on a use case involving an external first-factor authenticator with its own display. One example of such an authenticator would be a smart phone. Other authenticator types are also supported by this API, subject to implementation by the platform. For instance, this flow also works without modification for the case of an authenticator that is embedded in the client platform. The flow also works for the case of an external authenticator without its own display (similar to a smart card) subject to specific implementation considerations. Specifically, the client platform needs to display any prompts that would otherwise be shown by the authenticator, and the authenticator needs to allow the client platform to enumerate all the authenticator's credentials so that the client can have information to show appropriate prompts.</p>

  <section property="bibo:hasPart" resource="#registration" typeof="bibo:Chapter" id="registration">
    <h3 resource="#h-registration" id="h-registration"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.1 </span>Registration</span></h3>

    <p>This is the first time flow, when a new credential is created and registered with the server.
    </p>

    <ol type="1">
      <li>The user visits example.com, which serves up a script. At this point, the user must already be logged in using a legacy username and password, or additional authenticator, or other means acceptable to the Relying Party.</li>
      <li>The Relying Party script runs the code snippet below.
      </li><li>The client platform searches for and locates the external authenticator.</li>
      <li>The client platform connects to the external authenticator, performing any pairing actions if necessary.</li>
      <li>The external authenticator shows appropriate UI for the user to select the authenticator on which the new credential will be created, and obtains a biometric or other authorization gesture from the user.</li>
      <li>The external authenticator returns a response to the client platform, which in turn returns a response to the RP script. If the user declined to select an authenticator or provide authorization, an appropriate error is returned.</li>
      <li>If a new credential was created,
      <ol type="a">
        <li>The RP script sends the newly generated public key to the server, along with additional information about public key such as attestation that it is held in trusted hardware.</li>
        <li>The server stores the public key in its database and associates it with the user as well as with the strength of authentication indicated by attestation, also storing a friendly name for later use.</li>
        <li>The script may store data such as the credential ID in local storage, to improve future UX by narrowing the choice of credential for the user.</li>
      </ol>
      </li>
    </ol>

    <p>The sample code for generating and registering a new key follows:</p>


    <div class="example"><div class="example-title"><span>Example 1</span></div><pre style="" class="example highlight prettyprint prettyprinted"><span class="kwd">var</span><span class="pln"> fidoAPI </span><span class="pun">=</span><span class="pln"> window</span><span class="pun">.</span><span class="pln">fido</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">fidoAPI</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="com">/* Platform not capable. Handle error. */</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

</span><span class="kwd">var</span><span class="pln"> userAccountInformation </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  rpDisplayName</span><span class="pun">:</span><span class="pln"> </span><span class="str">"PayPal"</span><span class="pun">,</span><span class="pln">
  displayName</span><span class="pun">:</span><span class="pln"> </span><span class="str">"John P. Smith"</span><span class="pun">,</span><span class="pln">
  name</span><span class="pun">:</span><span class="pln"> </span><span class="str">"johnpsmith@gmail.com"</span><span class="pun">,</span><span class="pln">
  id</span><span class="pun">:</span><span class="pln"> </span><span class="str">"1098237235409872"</span><span class="pun">;</span><span class="pln">
  imageUri</span><span class="pun">:</span><span class="pln"> </span><span class="str">"https://pics.paypal.com/00/p/aBjjjpqPb.png"</span><span class="pln">
</span><span class="pun">};</span><span class="pln">

</span><span class="com">// This RP will accept either an ES256 or RS256 credential, but </span><span class="pln">
</span><span class="com">// prefers an ES256 credential.</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> cryptoParams </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
  </span><span class="pun">{</span><span class="pln"> 
    type</span><span class="pun">:</span><span class="pln"> </span><span class="str">"FIDO"</span><span class="pun">,</span><span class="pln">
    algorithm</span><span class="pun">:</span><span class="pln"> </span><span class="str">"ES256"</span><span class="pun">,</span><span class="pln">
  </span><span class="pun">},</span><span class="pln">
  </span><span class="pun">{</span><span class="pln">
    type</span><span class="pun">:</span><span class="pln"> </span><span class="str">"FIDO"</span><span class="pun">,</span><span class="pln">
    algorithm</span><span class="pun">:</span><span class="pln"> </span><span class="str">"RS256"</span><span class="pun">,</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">];</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> challenge </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Y2xpbWIgYSBtb3VudGFpbg"</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> timeoutSeconds </span><span class="pun">=</span><span class="pln"> </span><span class="lit">300</span><span class="pun">;</span><span class="pln">  </span><span class="com">// 5 minutes</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> blacklist </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[];</span><span class="pln">  </span><span class="com">// No blacklist</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> extensions </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="str">"fido.location"</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">};</span><span class="pln">  </span><span class="com">// Include location information </span><span class="pln">
                                           </span><span class="com">// in attestation</span><span class="pln">


</span><span class="com">// Note: The following call will cause the authenticator to display UI.</span><span class="pln">
fidoAPI</span><span class="pun">.</span><span class="pln">makeCredential</span><span class="pun">(</span><span class="pln">userAccountInformation</span><span class="pun">,</span><span class="pln"> cryptoParams</span><span class="pun">,</span><span class="pln"> challenge</span><span class="pun">,</span><span class="pln">
                       timeoutSeconds</span><span class="pun">,</span><span class="pln"> blacklist</span><span class="pun">,</span><span class="pln"> extensions</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">.</span><span class="kwd">then</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">newCredentialInfo</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// Send new credential info to server for verification and registration.</span><span class="pln">
</span><span class="pun">}).</span><span class="kwd">catch</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">err</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// No acceptable authenticator or user refused consent. Handle appropriately.</span><span class="pln">
</span><span class="pun">});</span></pre></div>
  </section>

  <section property="bibo:hasPart" resource="#authentication" typeof="bibo:Chapter" id="authentication">
    <h3 resource="#h-authentication" id="h-authentication"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.2 </span>Authentication</span></h3>

    <p>This is the flow when a user with an already registered credential visits a website and wants to authenticate using the credential.</p>

    <ol type="1">
      <li>The user visits example.com, which serves up a script.</li>
      <li>The script asks the client platform for a FIDO identity assertion, providing as much information as possible to narrow the choice of acceptable credentials for the user. This may be obtained from the data that was stored locally after registration, or by other means such as prompting the user for a username.</li>
      <li>The Relying Party script runs one of the code snippets below.</li>
      <li>The client platform searches for and locates the external authenticator.</li>
      <li>The client platform connects to the external authenticator, performing any pairing actions if necessary.</li>
      <li>The external authenticator presents the user with a notification that their attention is required. On opening the notification, the user is shown a friendly selection menu of acceptable credentials using the account information provided when creating the credentials, along with some information on the origin that is requesting these keys.</li>
      <li>The authenticator obtains a biometric or other authorization gesture from the user.</li>
      <li>The external authenticator returns a response to the client platform, which in turn returns a response to the RP script. If the user declined to select a credential or provide an authorization, an appropriate error is returned.</li>
      <li>If an assertion was successfully generated and returned,
      <ol type="a">
        <li>The script sends the assertion to the server.</li>
        <li>The server examines the assertion and validates that it was correctly generated. If so, it looks up the identity associated with the associated public key; that identity is now authenticated. If the public key is not recognized by the server (e.g., deregistered by server due to inactivity) then the authentication has failed; each Relying Party will handle this in its own way.</li>
        <li>The server now does whatever it would otherwise do upon successful authentication — return a success page, set authentication cookies, etc.</li>
      </ol>
      </li>
    </ol>


    <p>If the Relying Party script does not have any hints available (e.g., from locally stored data) to help it narrow the list of credentials, then the sample code for performing such an authentication might look like this:</p>

    <div class="example"><div class="example-title"><span>Example 2</span></div><pre style="" class="example highlight prettyprint prettyprinted"><span class="kwd">var</span><span class="pln"> fidoAPI </span><span class="pun">=</span><span class="pln"> window</span><span class="pun">.</span><span class="pln">fido</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">fidoAPI</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="com">/* Platform not capable. Handle error. */</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

</span><span class="kwd">var</span><span class="pln"> challenge </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Y2xpbWIgYSBtb3VudGFpbg"</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> timeoutSeconds </span><span class="pun">=</span><span class="pln"> </span><span class="lit">300</span><span class="pun">;</span><span class="pln">  </span><span class="com">// 5 minutes</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> whitelist </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[{</span><span class="pln"> type</span><span class="pun">:</span><span class="pln"> </span><span class="str">"FIDO"</span><span class="pln"> </span><span class="pun">}];</span><span class="pln">

fidoAPI</span><span class="pun">.</span><span class="pln">getAssertion</span><span class="pun">(</span><span class="pln">challenge</span><span class="pun">,</span><span class="pln"> timeoutSeconds</span><span class="pun">,</span><span class="pln"> whitelist</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">.</span><span class="kwd">then</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">assertion</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// Send assertion to server for verification</span><span class="pln">
</span><span class="pun">}).</span><span class="kwd">catch</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">err</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// No acceptable credential or user refused consent. Handle appropriately.</span><span class="pln">
</span><span class="pun">});</span></pre></div>

    <p>On the other hand, if the Relying Party script has some hints to help it narrow the list of credentials, then the sample code for performing such an authentication might look like the following. Note that this sample also demonstrates how to use the extension for transaction authorization.</p>

    <div class="example"><div class="example-title"><span>Example 3</span></div><pre style="" class="example highlight prettyprint prettyprinted"><span class="kwd">var</span><span class="pln"> fidoAPI </span><span class="pun">=</span><span class="pln"> window</span><span class="pun">.</span><span class="pln">fido</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">fidoAPI</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="com">/* Platform not capable. Handle error. */</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

</span><span class="kwd">var</span><span class="pln"> challenge </span><span class="pun">=</span><span class="pln"> </span><span class="str">"Y2xpbWIgYSBtb3VudGFpbg"</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> timeoutSeconds </span><span class="pun">=</span><span class="pln"> </span><span class="lit">300</span><span class="pun">;</span><span class="pln">  </span><span class="com">// 5 minutes</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> acceptableCredential1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  type</span><span class="pun">:</span><span class="pln"> </span><span class="str">"FIDO"</span><span class="pun">,</span><span class="pln">
  id</span><span class="pun">:</span><span class="pln"> </span><span class="str">"ISEhISEhIWhpIHRoZXJlISEhISEhIQo="</span><span class="pun">,</span><span class="pln">
</span><span class="pun">};</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> acceptableCredential2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  type</span><span class="pun">:</span><span class="pln"> </span><span class="str">"FIDO"</span><span class="pun">,</span><span class="pln">
  id</span><span class="pun">:</span><span class="pln"> </span><span class="str">"cm9zZXMgYXJlIHJlZCwgdmlvbGV0cyBhcmUgYmx1ZQo="</span><span class="pun">,</span><span class="pln">
</span><span class="pun">};</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> whitelist </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">acceptableCredential1</span><span class="pun">,</span><span class="pln"> acceptableCredential2</span><span class="pun">];</span><span class="pln">
</span><span class="kwd">var</span><span class="pln"> extensions </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="str">'fido.txauth.simple'</span><span class="pun">:</span><span class="pln"> 
                   </span><span class="str">"Wave your hands in the air like you just don't care"</span><span class="pln"> </span><span class="pun">};</span><span class="pln">
        
fidoAPI</span><span class="pun">.</span><span class="pln">getAssertion</span><span class="pun">(</span><span class="pln">challenge</span><span class="pun">,</span><span class="pln"> timeoutSeconds</span><span class="pun">,</span><span class="pln"> whitelist</span><span class="pun">,</span><span class="pln"> extensions</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">.</span><span class="kwd">then</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">assertion</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// Send assertion to server for verification</span><span class="pln">
</span><span class="pun">}).</span><span class="kwd">catch</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">err</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">// No acceptable credential or user refused consent. Handle appropriately.</span><span class="pln">
</span><span class="pun">});</span></pre></div>

  </section>

  <section property="bibo:hasPart" resource="#decommissioning" typeof="bibo:Chapter" id="decommissioning">
    <h3 resource="#h-decommissioning" id="h-decommissioning"><span property="xhv:role" resource="xhv:heading"><span class="secno">5.3 </span>Decommissioning</span></h3>

    <p>The following are possible situations in which decommissioning a credential might be desired. Note that all of these are handled on the server side and do not need support from the API specified here.</p>

    <ul>
      <li>
        Possibility #1 — user reports the credential as lost.
        <ul>
          <li>User goes to server.example.net, authenticates and follows a link to report a lost/stolen device.</li>
          <li>Server returns a page showing the list of registered credentials with friendly names as configured during registration.</li>
          <li>User selects a credential and the server deletes it from its database.</li>
          <li>In future, Relying Party script does not specify this credential in any list of acceptable credentials, and assertions signed by this credential are rejected.</li>
        </ul>
      </li>

      <li>
        Possibility #2 — server deregisters the credential due to inactivity.
        <ul>
          <li>Server deletes credential from its database during maintenance activity.</li>
          <li>In the future, the Relying Party script does not specify this credential in any list of acceptable credentials, and assertions signed by this credential are rejected.</li>
        </ul>
      </li>

      <li>
        Possibility #3 — user deletes the credential from the device.
        <ul>
          <li>User employs a device-specific method (e.g., device settings UI) to delete a credential from their device.</li>
          <li>From this point on, this credential will not appear in any selection prompts, and no assertions can be generated with it.</li>
          <li>Sometime later, the server deregisters this credential due to inactivity.</li>
        </ul>
      </li>
    </ul>
  </section>
</section>


<section property="bibo:hasPart" resource="#acknowledgements" typeof="bibo:Chapter" id="acknowledgements" class="informative">
  <!--OddPage--><h2 resource="#h-acknowledgements" id="h-acknowledgements"><span property="xhv:role" resource="xhv:heading"><span class="secno">6. </span>Acknowledgements</span></h2><p><em>This section is non-normative.</em></p>
  <p>We would like to thank the following for their contributions to, and thorough review of, this specification: Jing Jin, Michael B. Jones, Rolf Lindemann.
  </p>
</section>



<section property="bibo:hasPart" resource="#references" typeof="bibo:Chapter" id="references" class="appendix"><!--OddPage--><h2 resource="#h-references" id="h-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">A. </span>References</span></h2><section property="bibo:hasPart" resource="#normative-references" typeof="bibo:Chapter" id="normative-references"><h3 resource="#h-normative-references" id="h-normative-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">A.1 </span>Normative references</span></h3><dl resource="" class="bibliography"><dt id="bib-DOM4">[DOM4]</dt><dd>Anne van Kesteren; Aryeh Gregor; Ms2ger; Alex Russell; Robin Berjon. <a property="dc:requires" href="http://www.w3.org/TR/dom/"><cite>W3C DOM4</cite></a>. 6 October 2015. W3C Proposed Recommendation. URL: <a property="dc:requires" href="http://www.w3.org/TR/dom/">http://www.w3.org/TR/dom/</a>
</dd><dt id="bib-FIDOKeyAttestation">[FIDOKeyAttestation]</dt><dd><a property="dc:requires" href="http://www.w3.org/Submission/2015/SUBM-fido-key-attestation-20151120/"><cite>FIDO 2.0: Key attestation format</cite></a>. URL: <a property="dc:requires" href="http://www.w3.org/Submission/2015/SUBM-fido-key-attestation-20151120/">http://www.w3.org/Submission/2015/SUBM-fido-key-attestation-20151120/</a>
</dd><dt id="bib-FIDOSignatureFormat">[FIDOSignatureFormat]</dt><dd><a property="dc:requires" href="http://www.w3.org/Submission/2015/SUBM-fido-signature-format-20151120/"><cite>FIDO 2.0: Signature format</cite></a>. URL: <a property="dc:requires" href="http://www.w3.org/Submission/2015/SUBM-fido-signature-format-20151120/">http://www.w3.org/Submission/2015/SUBM-fido-signature-format-20151120/</a>
</dd><dt id="bib-HTML5">[HTML5]</dt><dd>Ian Hickson; Robin Berjon; Steve Faulkner; Travis Leithead; Erika Doyle Navara; Edward O'Connor; Silvia Pfeiffer. <a property="dc:requires" href="http://www.w3.org/TR/html5/"><cite>HTML5</cite></a>. 28 October 2014. W3C Recommendation. URL: <a property="dc:requires" href="http://www.w3.org/TR/html5/">http://www.w3.org/TR/html5/</a>
</dd><dt id="bib-RFC2119">[RFC2119]</dt><dd>S. Bradner. <a property="dc:requires" href="https://tools.ietf.org/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a property="dc:requires" href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
</dd><dt id="bib-WebCryptoAPI">[WebCryptoAPI]</dt><dd>Ryan Sleevi; Mark Watson. <a property="dc:requires" href="http://www.w3.org/TR/WebCryptoAPI/"><cite>Web Cryptography API</cite></a>. 11 December 2014. W3C Candidate Recommendation. URL: <a property="dc:requires" href="http://www.w3.org/TR/WebCryptoAPI/">http://www.w3.org/TR/WebCryptoAPI/</a>
</dd><dt id="bib-WebIDL-1">[WebIDL-1]</dt><dd>Cameron McCormack; Boris Zbarsky. <a property="dc:requires" href="http://www.w3.org/TR/WebIDL-1/"><cite>WebIDL Level 1</cite></a>. 4 August 2015. W3C Working Draft. URL: <a property="dc:requires" href="http://www.w3.org/TR/WebIDL-1/">http://www.w3.org/TR/WebIDL-1/</a>
</dd></dl></section><section property="bibo:hasPart" resource="#informative-references" typeof="bibo:Chapter" id="informative-references"><h3 resource="#h-informative-references" id="h-informative-references"><span property="xhv:role" resource="xhv:heading"><span class="secno">A.2 </span>Informative references</span></h3><dl resource="" class="bibliography"><dt id="bib-PSL">[PSL]</dt><dd><cite><a href="https://publicsuffix.org/">Public Suffix List</a></cite>.
   Mozilla Foundation.
</dd><dt id="bib-powerful-features">[powerful-features]</dt><dd>Mike West; Yan Zhu. <a property="dc:references" href="http://www.w3.org/TR/powerful-features/"><cite>Privileged Contexts</cite></a>. 24 April 2015. W3C Working Draft. URL: <a property="dc:references" href="http://www.w3.org/TR/powerful-features/">http://www.w3.org/TR/powerful-features/</a>
</dd></dl></section></section></body></html>
